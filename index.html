<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tr·∫Øc nghi·ªám ngh·ªÅ nghi·ªáp AI gi·∫£ l·∫≠p</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: #ffe;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }
    h1 {
      color: #444;
    }
    .scanner {
      width: 300px;
      height: 300px;
      border: 5px dashed #888;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 20px;
      position: relative;
    }
    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .scanner::before {
      content: '';
      position: absolute;
      top: 0;
      width: 100%;
      height: 5px;
      background: red;
      animation: scan 2s infinite;
    }
    @keyframes scan {
      0% { top: 0; }
      50% { top: 295px; }
      100% { top: 0; }
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      margin-top: 20px;
      cursor: pointer;
    }
    .result {
      margin-top: 30px;
      font-size: 22px;
      color: #222;
      max-width: 600px;
      text-align: center;
    }
    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 3px solid #f00;
      padding: 20px;
      z-index: 999;
      font-size: 20px;
      display: none;
      box-shadow: 0 0 20px red;
      text-align: center;
    }
    .popup img {
      width: 300px;
      height: auto;
      margin-top: 10px;
    }
    .popup button {
      display: block;
      margin: 15px auto 0;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 998;
    }
  </style>
</head>
<body>
  <h1>üîç AI ƒëang qu√©t khu√¥n m·∫∑t b·∫°n...</h1>
  <div class="scanner">
    <video id="camera" autoplay playsinline></video>
  </div>
  <button onclick="generateResult()">Xem b·∫°n h·ª£p v·ªõi ngh·ªÅ g√¨?</button>
  <div class="result" id="result"></div>
  <div class="popup" id="popup"></div>
  <canvas id="fireworks"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/fireworks-js@2.9.2/dist/fireworks.js"></script>
  <script>
    const originalDatabase = [
      {
        name: "Skibidi Toilet",
        job: "K·ªπ s∆∞ toilet th√¥ng minh AI 5.0",
        img: "https://media.tenor.com/YzseE_-j48QAAAAM/skibidi-toilet.gif"
      },
      {
        name: "Gigachad",
        job: "Ng∆∞·ªùi m·∫´u gi√°o tr√¨nh gi·∫£i ph·∫´u h·ªçc ƒë·∫°i h·ªçc Y",
        img: "https://media0.giphy.com/media/CAYVZA5NRb529kKQUc/giphy.gif?cid=6c09b9525b64knlxz176iccoljzuf3q16yynahwbhteuv29n&ep=v1_gifs_search&rid=giphy.gif&ct=g"
      },
      {
        name: "Sigma Male",
        job: "Nh√† kh·ªüi nghi·ªáp ƒë·ªôc l·∫≠p nh∆∞ng ch∆∞a ai bi·∫øt t·ªõi",
        img: "https://gifdb.com/images/thumbnail/sigma-face-turn-him-to-something-meme-pisrnx8qjf6ogl32.gif"
      },
      {
        name: "NPC TikTok",
        job: "Di·ªÖn vi√™n l·ªìng ti·∫øng AI s·ªëng th·ª±c t·∫ø ·∫£o",
        img: "https://media.tenor.com/Ancqy6tT-r4AAAAM/dance-if-youre-a-npc-npc.gif"
      },
      {
        name: "Walter White",
        job: "Gi√°o vi√™n ho√° h·ªçc ƒë·∫°t chu·∫©n ISO v√† BTV ch·∫•t l∆∞·ª£ng",
        img: "https://media.tenor.com/YFH8r7l0IX0AAAAM/walter-white-falling.gif"
      },
      {
        name: "Shrek",
        job: "K·ªπ s∆∞ sinh th√°i h·ªçc chuy√™n x·ª≠ l√Ω ƒë·∫ßm l·∫ßy",
        img: "https://media1.tenor.com/m/yEG23sxXIVQAAAAC/shrek-shrek-meme.gif"
      },
      {
        name: "Peppa Pig",
        job: "Gi·∫£ng vi√™n ch√≠nh tr·ªã t∆∞ duy t·∫°i ƒê·∫°i h·ªçc Zaza",
        img: "https://media.tenor.com/M3idAwyA32QAAAAM/peppa-pig-pig.gif"
      },
      {
        name: "Duolingo",
        job: "Gi√°m s√°t vi√™n / Th√°m t·ª≠ theo d√µi",
        img: "https://i.makeagif.com/media/12-10-2024/F98jvH.gif"
      }
    ];

    let availablePool = [...originalDatabase];

    function generateResult() {
      if (availablePool.length === 0) {
        availablePool = [...originalDatabase];
      }
      const index = Math.floor(Math.random() * availablePool.length);
      const pick = availablePool.splice(index, 1)[0];

      const popup = document.getElementById("popup");

      popup.innerHTML = `üéâ B·∫°n ch√≠nh l√† <strong>${pick.name}</strong>!<br>üëâ Ngh·ªÅ ph√π h·ª£p: <em>${pick.job}</em><br><img src="${pick.img}" alt="${pick.name}"><br><button onclick=\"document.getElementById('popup').style.display='none'\">ƒê√≥ng</button>`;
      popup.style.display = 'block';

      const container = document.getElementById("fireworks");
      const fireworks = new Fireworks.default(container, {
        rocketsPoint: { min: 0, max: 100 },
        speed: 4,
        acceleration: 1.05,
        friction: 0.97,
        gravity: 1.5,
        particles: 80,
        trace: 3,
        explosion: 5,
        autoresize: true,
        brightness: {
          min: 50,
          max: 80,
          decay: { min: 0.01, max: 0.02 }
        },
        boundaries: {
          x: 0,
          y: 0,
          width: window.innerWidth,
          height: window.innerHeight
        },
        sound: {
          enable: false
        }
      });
      fireworks.start();
      setTimeout(() => fireworks.stop(), 4000);
    }

    const video = document.getElementById('camera');
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        video.srcObject = stream;
      })
      .catch(err => {
        console.error("Kh√¥ng th·ªÉ truy c·∫≠p camera:", err);
      });
  </script>
</body>
</html>
